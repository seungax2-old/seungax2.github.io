<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>pointCloud</title>
        <style>
            *{margin: 0; padding: 0;overflow: hidden;}
        </style>
    </head>
    <body>
        <script src="../js/build/three.js"></script>
        <script src="../js/controls/OrbitControls.js"></script>
        <script>
        //https://threejs.org/docs/#api/en/core/Face3 :: face 쓸때
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

        camera.position.x = 30
        camera.position.z = 5

        var renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );
        document.body.appendChild( renderer.domElement );

        var controls = new THREE.OrbitControls( camera, renderer.domElement );
        controls.update();
        controls.maxDistance = 500
        controls.minDistance = 10

        var light = new THREE.DirectionalLight( 0xffffff );
        light.position.set( -10, 10, 30 ).normalize();
        scene.add(light);

        var geometry = new THREE.Geometry(5, 50, 50)

        // vCount (int) - n개
        var count = 10000

        for(var i = 0; i < count; i++) {
            //vector(float) - vx, vy, vz
            var point = new THREE.Vector3();
            point.x = THREE.Math.randFloatSpread(20)
            point.y = THREE.Math.randFloatSpread(20)
            point.z = THREE.Math.randFloatSpread(20)

            geometry.vertices.push(point);
            var colorRange = Math.round(THREE.Math.mapLinear(i, 0, count, 0, 360)),
                    transparent = Math.round(THREE.Math.mapLinear(i, 0, count, 0, 100)),
                    highlight = Math.round(THREE.Math.mapLinear(i, 0, count, 0, 100)) + '%'
            // cololist 0~255 사이 숫자 - cr1, cg1, cb1
            var color = new THREE.Color(`hsla(${colorRange}, 100%, ${highlight}, ${transparent})`)
            geometry.colors.push(color)
        }

        var material = new THREE.PointsMaterial({ size: 0.1, vertexColors: THREE.VertexColors })

        var points = new THREE.Points(geometry, material)

        scene.add(points)

        var render = () => {
            requestAnimationFrame(render)
            renderer.render(scene, camera)
            controls.update()

            points.rotation.y += 0.001
            points.rotation.z += 0.002

          camera.lookAt(scene.position);
        }

        render()
        </script>
    </body>
</html>
